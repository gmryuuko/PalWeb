@page "/"
@using Web.Services

@inject PalService PalService
@inject ISnackbar Snackbar

<PageTitle>Home</PageTitle>

@if (_serverInfo == null)
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true"/>
}
else
{
    <MudContainer>
        <MudText Typo="Typo.h3" GutterBottom="true">Server Info</MudText>
        <MudText Typo="Typo.body1">Name: @_serverInfo.ServerName</MudText>
        <MudText Typo="Typo.body1">Description: @_serverInfo.Description</MudText>
        <MudText Typo="Typo.body1">Version: @_serverInfo.Version</MudText>
        <MudText Typo="Typo.body1">World Guid: @_serverInfo.WorldGuid</MudText>
    </MudContainer>
}

@code
{
    private PalServerInfo? _serverInfo;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            _serverInfo = await PalService.GetServerInfoAsync();
        }
        catch (Exception e)
        {
            Snackbar.Add(e.Message, Severity.Error);
        }
    }
}
