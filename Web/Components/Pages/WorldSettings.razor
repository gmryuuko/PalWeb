@page "/settings"
@using Web.Services
@inject PalService PalService
@inject ISnackbar Snackbar

<PageTitle>World Settings</PageTitle>
<MudContainer>
    <MudText Typo="Typo.h3" GutterBottom="true">World Settings</MudText>
    @if (_settings == null)
    {
        <MudProgressCircular Color="Color.Default" Indeterminate="true"/>
    }
    else
    {
        <MudText Typo="Typo.body1">ServerName: @_settings.ServerName</MudText>
        <MudText Typo="Typo.body1">ServerDescription: @_settings.ServerDescription</MudText>
        <MudText Typo="Typo.body1">ServerPlayerMaxNum: @_settings.ServerPlayerMaxNum</MudText>

        <MudButton Color="Color.Primary" Variant="Variant.Filled" OnClick="EditSettings">Edit</MudButton>
        <MudButton Color="Color.Primary" Variant="Variant.Filled" OnClick="SaveSettings">Save</MudButton>
    }
</MudContainer>

@code {
    private PalWorldSettings? _settings;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            _settings = await PalService.GetPalWorldSettingsAsync();
        }
        catch (Exception e)
        {
            Snackbar.Add(e.Message, Severity.Error);
        }
    }
    
    private async Task EditSettings()
    {
        Snackbar.Add("Not Implemented", Severity.Error);
    }

    private async Task SaveSettings()
    {
        Snackbar.Add("Not Implemented", Severity.Error);
    }

}